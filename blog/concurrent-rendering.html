<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/homepage/blog/rss.xml" title="Hello! 我是一洋 RSS Feed"><title data-rh="true">React 18 并发（Concurrent）渲染的入门指南 | Hello! 我是一洋</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://umeimmense.github.io/homepage/blog/concurrent-rendering"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="React 18 并发（Concurrent）渲染的入门指南 | Hello! 我是一洋"><meta data-rh="true" name="description" content="前言"><meta data-rh="true" property="og:description" content="前言"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-03-02T15:21:22.000Z"><meta data-rh="true" property="article:tag" content="React,React Conf 2021"><link data-rh="true" rel="icon" href="/homepage/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://umeimmense.github.io/homepage/blog/concurrent-rendering"><link data-rh="true" rel="alternate" href="https://umeimmense.github.io/homepage/blog/concurrent-rendering" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://umeimmense.github.io/homepage/blog/concurrent-rendering" hreflang="x-default"><link rel="stylesheet" href="/homepage/assets/css/styles.709fa131.css">
<link rel="preload" href="/homepage/assets/js/runtime~main.33bdfa9d.js" as="script">
<link rel="preload" href="/homepage/assets/js/main.777aca88.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">跳到主要内容</a></div><div class="announcementBar_IbjG" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">👊坚持学习，持续进步🌞。</div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="关闭"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/homepage/"><div class="navbar__logo"><img src="/homepage/img/avatar.png" alt="Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/homepage/img/avatar.png" alt="Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">一洋</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/homepage/docs/intro">教程</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/homepage/blog">博客</a><a class="navbar__item navbar__link" href="/homepage/note">读书笔记</a><a href="https://umeimmense.github.io/resume" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">简历<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/umeimmense/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_TMXw thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_V4zb margin-bottom--md">全部博文</div><ul class="sidebarItemList_uHd5 clean-list"><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/ru-he-shi-yong-facebook-kai-yuan-ku-docusaurus-da-jian-ge-ren-zhu-ye">如何使用facebook开源库 docusaurus 搭建个人主页</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/ke-cheng-gai-lan-yu-shell">MIT 课程 - 概览与 shell</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/png-de-gong-zuo-yuan-li-xi-sheng-su-du-huan-qu-zhi-liang">PNG的工作原理：牺牲速度换取质量</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/shi-me-shi-dns-or-dns-de-gong-zuo-fang-shi">什么是 DNS？ | DNS 的工作方式</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/react-de-shi-jian-chu-li">React 中的事件处理</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/react-shi-jian-mou-pao-he-bu-huo">React 中的事件冒泡和捕获</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/react-zhong-de-qian-bi-jiao-shi-ru-he-gong-zuo-de">React 中的浅比较是如何工作的？</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/react-suspense-ji-ben-zhi-nan">React Suspense 基本指南</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/react-18-zhong-de-zi-dong-pi-chu-li">React 18 中的自动批处理</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/tan-suo-react-18-de-san-ge-xin-api">探索 React 18 的三个新 API</a></li><li class="sidebarItem_spIe"><a aria-current="page" class="sidebarItemLink_eqrF sidebarItemLinkActive_XZSJ" href="/homepage/blog/concurrent-rendering">React 18 并发（Concurrent）渲染的入门指南</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/react-router-6qian-tao-lu-you">React Router 6：嵌套路由</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/javascript-zhong-de-dui"> JavaScript 中的 Heap</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/javascript-zhong-de-xi-shu-shu-zu-yu-mi-ji-shu-zu-de-qu-bie">JavaScript 中的稀疏数组与密集数组的区别？</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/javascript-zhong-de-trieshi-me-shi-qian-zhui-shu">JavaScript 中的 Trie：什么是前缀树？</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/javascript-jiang-shu-bian-li-suan-fa-ying-yong-yu-dom">JavaScript 将树遍历算法应用于 DOM</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/javascript-zhong-de-tree-shi-yong-fu-zhi-zhen-gao-xiao-bian-li">JavaScript 中的 Tree 使用父指针高效遍历</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/javascript-zhong-de-tree">JavaScript 中的 Tree</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/javascript-yin-qing-ru-he-ti-sheng-qi-yun-xing-shi-de-xing-neng">JavaScript 引擎如何提升其运行时的性能？</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/ke-neng-xu-yao-de-7-ge-zi-ding-yi-react-hook">7 个可能需要的自定义 React Hook</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/homepage/blog/shi-ge-chang-yong-de-javascript-shi-yong-ji-qiao">10个常用的 JavaScript 使用技巧</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">React 18 并发（Concurrent）渲染的入门指南</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-03-02T15:21:22.000Z" itemprop="datePublished">2022年3月2日</time> · <!-- -->7 分钟阅读</div></header><div id="post-content" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_mojV" id="前言">前言<a class="hash-link" href="#前言" title="标题的直接链接">​</a></h2><p>目前 React 领域最热门的话题是 React 18 版本。 特别是，该版本将引入一组所谓的并发渲染功能。 这些特性允许开发者选择 React 的并发渲染机制。 这种机制为 React 开发人员提供了一个全新的机会来控制和优化最终用户的体验。 这绝对是自 hooks 以来，我们在 React 世界中将收到的最令人兴奋的事情之一。</p><p>因此，你很可能以前听说过并发渲染。 可能是关于它的文章、围绕它的 API，或者 React 18 将为它带来什么。 但是，你可能会对并发渲染的基础知识感到疑惑。 究竟什么是并发渲染，为什么我们真的需要它？</p><p>为了帮助你理解，本文将讨论这些问题。 通过研究它的目的、它试图解决什么问题以及它是如何解决它的，你将获得有关并发渲染主题的基础知识。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="为什么我们需要并发渲染">为什么我们需要并发渲染？<a class="hash-link" href="#为什么我们需要并发渲染" title="标题的直接链接">​</a></h2><p>React 当前形式的问题之一是所有状态更新都是同步的。 这意味着 React 只能一一处理它们。 在许多用例和现实生活场景中，这非常好，不会对用户体验施加任何限制。</p><p>但是在 React 想要获取与其当前正在处理的状态更新不同的状态更新的情况下，现在这显然是不可能的。 React 在启动后无法中断、暂停或放弃渲染更新——这是一个阻塞的进程。</p><p>从本质上讲，这对优化用户体验的过程设置了上限。 虽然很高，但还是有上限的。 每个状态更新都被视为同等重要，即使这不适用于用户体验。 某些更新可能比其他更新具有更高的优先级或紧迫性。 与可能的情况相比，不能这样做实际上会对用户体验产生巨大的负面影响，这是次优的。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="什么是并发渲染">什么是并发渲染？<a class="hash-link" href="#什么是并发渲染" title="标题的直接链接">​</a></h2><p>并发渲染是一组功能，允许你的 React 项目选择所谓的可中断渲染。 与之前 React 被阻塞的渲染过程相反，这使得渲染过程可以从 React 端中断，这正是并发渲染的用武之地。这为 React 开发人员进一步提升 React 应用程序的用户体验开辟了许多新的可能性。</p><p>它允许 React 一次处理多个状态更新。 然而，这并不意味着 React 会突然同时执行所有排队状态更新。 相反，选择并发渲染允许 React 考虑其最佳行动方案。 幸运的是，这也是我们作为开发人员可以控制的事情。</p><p>假设 React 当前正在处理状态更新并且有一个不同的更新进来，那么 React 可以根据变量的因素做出不同的决定。 如果新的传入状态更新被标记为同等或不那么紧急，那么与之前的渲染过程相比没有任何变化。 React 将像往常一样继续当前状态更新。 完成后，它将获取新的状态更新。</p><p>但是如果新传入的状态更新被标记为更紧急，那么 React 可以决定暂停当前状态更新并首先处理传入的更新。 在完成新的更紧急的状态更新后，React 会回到原来的状态更新。 如果它确定有必要恢复它，它会这样做。 如果事实证明状态更新现在无关紧要，它可以决定完全放弃它。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="下一步是什么">下一步是什么？<a class="hash-link" href="#下一步是什么" title="标题的直接链接">​</a></h2><p>本文简要介绍了 React 18 将为 React 开发领域带来的最激动人心的功能之一，即并发渲染，并让你快速了解整个主题。 使用本文中的知识，你应该知道什么是并发渲染，了解它试图解决的问题，并大致了解它的工作原理。</p><p>幸运的是，并发渲染并不止于此。 虽然并发渲染还有很多方面需要理解或深入研究，但本文作为介绍以进入整个主题，并允许你从这里开始进一步探索 React 18。</p><p>下面准备了一些资料
<a href="/homepage/blog/tan-suo-react-18-de-san-ge-xin-api">这里</a>介绍了 React 18 中引入的三个新 API。所有这些 API 都是允许某些开发人员在某些场景中选择并发渲染的hook。
<a href="https://reactjs.org/blog/2021/06/08/the-plan-for-react-18.html" target="_blank" rel="noopener noreferrer">官方的 React 18 公告</a>是了解更多关于 React 18、不同特性、如何采用它以及关于即将发布的 React 版本的所有信息的好地方。
<a href="https://github.com/reactwg/react-18/discussions" target="_blank" rel="noopener noreferrer">React 工作组</a>是了解更多技术方面、获得更多指导、了解不同 API 和特性背后的思维过程以及总体上更深入地了解 React 18 中所有内容的好地方。
这就是全部！ 现在你已经牢牢掌握了并发渲染的主题，在 React 18 中为你打开了一个全新的世界供你探索。走出去，探索并享受这个新的冒险！</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>标签：</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/homepage/blog/tags/react">React</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/homepage/blog/tags/react-conf-2021">React Conf 2021</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/umeimmense/homepage/tree/main/blog/blog/concurrent-rendering.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="博文分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/homepage/blog/tan-suo-react-18-de-san-ge-xin-api"><div class="pagination-nav__sublabel">较新一篇</div><div class="pagination-nav__label">探索 React 18 的三个新 API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/homepage/blog/react-router-6qian-tao-lu-you"><div class="pagination-nav__sublabel">较旧一篇</div><div class="pagination-nav__label">React Router 6：嵌套路由</div></a></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#前言" class="table-of-contents__link toc-highlight">前言</a></li><li><a href="#为什么我们需要并发渲染" class="table-of-contents__link toc-highlight">为什么我们需要并发渲染？</a></li><li><a href="#什么是并发渲染" class="table-of-contents__link toc-highlight">什么是并发渲染？</a></li><li><a href="#下一步是什么" class="table-of-contents__link toc-highlight">下一步是什么？</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 YI YANG FU 基于 Docusaurus 构建。</div></div></div></footer></div>
<script src="/homepage/assets/js/runtime~main.33bdfa9d.js"></script>
<script src="/homepage/assets/js/main.777aca88.js"></script>
</body>
</html>